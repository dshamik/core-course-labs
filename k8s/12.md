# ConfigMaps

## Task 1

Ansible role is updated

```shell
~ curl http://localhost:8090/visits
14%
```

```shell
/app $ cat ./volume/visits 
14
```

## Task 2

```shell
~  helm install python . --values values_python.yaml

NAME: python
LAST DEPLOYED: Tue Nov 21 22:08:40 2023
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
1. Get the application URL by running these commands:
  export NODE_PORT=$(kubectl get --namespace default -o jsonpath="{.spec.ports[0].nodePort}" services python-my-app)
  export NODE_IP=$(kubectl get nodes --namespace default -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT
```

```shell
~ kubectl get configmap

NAME               DATA   AGE
configmap          1      60s
kube-root-ca.crt   1      20d
```

```shell
~ kubectl get pods

NAME                             READY   STATUS    RESTARTS   AGE
python-my-app-7898ff896d-wmpkv   1/1     Running   0          98s
```

```shell
~ kubectl exec -it python-my-app-7898ff896d-wmpkv /bin/sh

kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.
/app $ cat /config.json
{"key": "value"}/app $
```